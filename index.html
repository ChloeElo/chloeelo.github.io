<html>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0', shrink-to-fit=no">
<head>
<style>

body {
	min-width: 300px;
	background-color: #36393e;
	margin: 0;
	overflow:auto;
	-ms-overflow-style: none;  /* Internet Explorer 10+ */
    scrollbar-width: none;  /* Firefox */
    text-align: center;
}

body::-webkit-scrollbar { 
    display: none;  /* Safari and Chrome */
}

#contentbox {
	position: absolute;
	width: 100%;
}

.grouptitle {
	color: white;
	font-family: 'Comic Sans MS', 'Chalkboard SE', 'Comic Neue', sans-serif;
}

.grid-container {
	display: grid;
	grid-template-columns: repeat(2, minmax(0, 1fr));
	grid-gap: 5px;
	width: 100vw;
	max-width: 100%;
	background-color: #36393e;
	justify-content: center;
    align-items: center;
    overflow: hidden;
	padding-top: 5px;
}

.image {
	max-width: 100%;
	max-height: 100%;
	object-fit: cover;
	aspect-ratio: 1;
	border-radius: 10px;
}

.nodrag {
	user-drag: none;
    -webkit-user-drag: none;
    user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
}

.image:hover {
	outline: #9CFF00 solid 4px;
	transition:100ms;
}

#wideboy {
	position:absolute;
	width:200%;
	overflow-x:auto;
}

</style>
<link rel="icon" type="image/x-icon" href="favicon.ico" />
<!-- <script src="./index.js" defer></script> -->
<title>Search</title>
</head>

<body onload='setDefaultScroll()'>
	<div id='wideboy'> &nbsp </div> <!-- Makes page wider so it can scroll -->
	<div id="contentbox">
		
	</div>

</body>

<script>
	
	grid_xscale = [0,0.15,0.3,0.45,0.6,0.75,0.85,0.95,1.1]; // 1.1 is there for initial block scaling reference
	
	var current_blocks = 2;
	document.addEventListener("scroll", (event) => {
		offset = window.pageXOffset;
		document.getElementById("contentbox").style['left'] = offset;
		percent = offset/window.innerWidth;
		for (i = 0; i < grid_xscale.length; i++) { // Scan for highest grid_xscale index, then add 2 to get the grid width
			if (grid_xscale[i]>=percent) { break; }
		}
		blocks = i+2;
		if (blocks != current_blocks) {
			current_blocks = blocks;
			setTimeout(reblockGrid(),1);
		}
	})
	
	function reblockGrid() {
		document.querySelectorAll('.grid-container').forEach((group) => {
			group.style["grid-template-columns"] = 'repeat('+String(blocks)+', minmax(0, 1fr))';
		});
	}
	
	function mkElement(type, id, clas) {
		let newel = document.createElement(type);
		if (id) {
			newel.setAttribute("id", id);
		}
		if (clas) {
			newel.setAttribute("class", clas);
		}
		return newel;
	}

	function setDefaultScroll() {
		let width = window.innerWidth;
		blocks = Math.floor(width/100); // Set default block width based on screen res
		if (blocks < 2) { blocks = 2; }
		if (blocks > 10) { blocks = 10; }
		let percent = grid_xscale[blocks-2];
		let offset = width*percent;
		setTimeout(function () {window.scrollTo(offset, 0)},1);
	}
	
	for (let i=10; i > 0; i--) {
		let newheader = mkElement("h1", "header"+String(i), "grouptitle");
		newheader.innerHTML = 'Season '+String(i)
		document.getElementById("contentbox").appendChild(newheader);
		
		let newgroup =  mkElement("div", "group"+String(i), "grid-container");
		document.getElementById("contentbox").appendChild(newgroup);
	}
	
	for (let i=996; i > 0; i--) {
		let newimg = mkElement("img", "img"+String(i), "image nodrag");
		newimg.src = 'Images/'+String(i)+'.webp'
		newimg.loading = 'lazy'
		document.getElementById("group"+String(Math.floor((i-1)/100)+1)).appendChild(newimg);
	}
	

	
</script>

</html>
